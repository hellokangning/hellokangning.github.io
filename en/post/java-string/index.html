<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Java String - Qing&#39;s Landing</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Guoqing Geng" /><meta name="description" content="String is one of the most common type of data in computer languages. A Java string is a series of characters gathered together, such as &amp;ldquo;abc&amp;rdquo;. Strings are constant, which means their value cannot be changed after created.
This post introduces the basic of Java string, includes methods for examining individual characters of the sequence, for comparing strings, for searching strings, for extracting substrings and so on.
" /><meta name="keywords" content="String, Java" />






<meta name="generator" content="Hugo 0.58.1 with theme even" />


<link rel="canonical" href="https://hellokangning.github.io/en/post/java-string/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">


<link href="/dist/even.c2a46f00.min.css" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">


<meta property="og:title" content="Java String" />
<meta property="og:description" content="String is one of the most common type of data in computer languages. A Java string is a series of characters gathered together, such as &ldquo;abc&rdquo;. Strings are constant, which means their value cannot be changed after created.

This post introduces the basic of Java string, includes methods for examining individual characters of the sequence, for comparing strings, for searching strings, for extracting substrings and so on." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hellokangning.github.io/en/post/java-string/" />
<meta property="article:published_time" content="2016-04-13T11:33:34+08:00" />
<meta property="article:modified_time" content="2016-04-13T15:33:34+08:00" />
<meta itemprop="name" content="Java String">
<meta itemprop="description" content="String is one of the most common type of data in computer languages. A Java string is a series of characters gathered together, such as &ldquo;abc&rdquo;. Strings are constant, which means their value cannot be changed after created.

This post introduces the basic of Java string, includes methods for examining individual characters of the sequence, for comparing strings, for searching strings, for extracting substrings and so on.">


<meta itemprop="datePublished" content="2016-04-13T11:33:34&#43;08:00" />
<meta itemprop="dateModified" content="2016-04-13T15:33:34&#43;08:00" />
<meta itemprop="wordCount" content="1530">



<meta itemprop="keywords" content="java.lang,Data Structure," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Java String"/>
<meta name="twitter:description" content="String is one of the most common type of data in computer languages. A Java string is a series of characters gathered together, such as &ldquo;abc&rdquo;. Strings are constant, which means their value cannot be changed after created.

This post introduces the basic of Java string, includes methods for examining individual characters of the sequence, for comparing strings, for searching strings, for extracting substrings and so on."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/en/" class="logo">Qing&#39;s Landing</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/en/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/en/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/en/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/en/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/zh/">
        <li class="mobile-menu-item">中文</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/en/" class="logo">Qing&#39;s Landing</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/en/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/en/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/en/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/en/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/zh/">中文</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Java String</h1>

      <div class="post-meta">
        <span class="post-time"> Apr 13, 2016 </span>
        <div class="post-category">
            <a href="/en/categories/java/"> Java </a>
            </div>
          <span class="more-meta"> 1530 words </span>
          <span class="more-meta"> 8 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li><a href="#member-variables">Member Variables</a></li>
<li><a href="#member-functions">Member Functions</a>
<ul>
<li><a href="#constructor">Constructor</a></li>
<li><a href="#length"><code>length()</code></a></li>
<li><a href="#isempty"><code>isEmpty()</code></a></li>
<li><a href="#charat-int"><code>charAt(int)</code></a></li>
<li><a href="#equals-object"><code>equals(Object)</code></a></li>
<li><a href="#startswith-string-int"><code>startsWith(String, int)</code></a></li>
<li><a href="#indexof-int-int"><code>indexOf(int, int)</code></a></li>
<li><a href="#indexof-string"><code>indexOf(String)</code></a></li>
<li><a href="#substring-int-int"><code>substring(int, int)</code></a></li>
<li><a href="#concat-string"><code>concat(String)</code></a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p><code>String</code> is one of the most common type of data in computer languages. A Java string is a series of characters gathered together, such as &ldquo;abc&rdquo;. Strings are constant, which means their value cannot be changed after created.</p>

<p>This post introduces the basic of Java string, includes methods for examining individual characters of the sequence, for comparing strings, for searching strings, for extracting substrings and so on.</p>

<p>The code of <code>String</code> is located in <code>java.lang.String</code>. All classes in the <code>java.lang</code> package are imported by default. Thus you do not need to <code>import java.lang.*</code>.</p>

<blockquote>
<p>All codes in this post are based on jdk10.</p>
</blockquote>

<h1 id="member-variables">Member Variables</h1>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="nf">final</span> <span class="kd">class</span> <span class="nf">String</span>
    <span class="kd">implements</span> <span class="nf">java</span><span class="p">.</span><span class="na">io</span><span class="p">.</span><span class="na">Serializable</span><span class="p">,</span> <span class="n">Comparable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="p">,</span> <span class="n">CharSequence</span> <span class="p">{</span>
    <span class="nd">@Stable</span>
    <span class="kd">private</span> <span class="nf">final</span> <span class="kt">byte</span><span class="p">[]</span> <span class="nf">value</span><span class="p">;</span>

    <span class="kd">private</span> <span class="nf">final</span> <span class="kt">byte</span> <span class="nf">coder</span><span class="p">;</span>
    <span class="kd">private</span> <span class="nf">int</span> <span class="n">hash</span><span class="p">;</span> 

    <span class="kd">static</span> <span class="nf">final</span> <span class="kt">boolean</span> <span class="nf">COMPACT_STRINGS</span><span class="p">;</span>
    <span class="kd">static</span> <span class="p">{</span>
        <span class="n">COMPACT_STRINGS</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<ul>
<li><code>value</code> is used for character storage. It is marked with <code>Stable</code> to trust the contents of the array, because value is never null.</li>
<li><code>coder</code> is identifier of the encoding used to encode the bytes in <code>value</code>. The supported values in this implementation are <code>LATIN1</code> and <code>UTF16</code>.</li>
<li><code>hash</code> caches the hash code for the string.</li>
<li><code>COMPACT_STRINGS</code> indicates whether String compaction is disabled. if disabled, the bytes in <code>value</code> are always encoded in UTF16.</li>
</ul>

<p>For simplicity, We will consider <code>LATIN1</code> only.</p>

<h1 id="member-functions">Member Functions</h1>

<h2 id="constructor">Constructor</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// String.java
</span><span class="c1"></span>
<span class="cm">/*
</span><span class="cm"> Initiliazes a newly created String object 
</span><span class="cm"> so that it represents the same sequence of characters as the argument
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">String</span><span class="p">(</span><span class="n">String</span> <span class="nf">original</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">original</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">coder</span> <span class="o">=</span> <span class="n">original</span><span class="p">.</span><span class="na">coder</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">hash</span> <span class="o">=</span> <span class="n">original</span><span class="p">.</span><span class="na">hash</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*
</span><span class="cm">    Constructs a new String by decoding the specified subarray of
</span><span class="cm">    bytes using the specified charset. 
</span><span class="cm"> */</span>
<span class="kd">public</span> <span class="nf">String</span><span class="p">(</span><span class="kt">byte</span> <span class="nf">bytes</span><span class="p">[],</span> <span class="kt">int</span> <span class="nf">offset</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">length</span><span class="p">,</span> <span class="n">String</span> <span class="nf">charsetName</span><span class="p">)</span>
        <span class="kd">throws</span> <span class="nf">UnsupportedEncodingException</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">charsetName</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">NullPointerException</span><span class="p">(</span><span class="s">&#34;charsetName&#34;</span><span class="p">);</span>
    <span class="n">checkBoundsOffCount</span><span class="p">(</span><span class="n">offset</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">bytes</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
    <span class="n">StringCoding</span><span class="p">.</span><span class="na">Result</span> <span class="nf">ret</span> <span class="o">=</span>
        <span class="n">StringCoding</span><span class="p">.</span><span class="na">decode</span><span class="p">(</span><span class="n">charsetName</span><span class="p">,</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">length</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">ret</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="na">coder</span> <span class="o">=</span> <span class="n">ret</span><span class="p">.</span><span class="na">coder</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// StringEncoding.java
</span><span class="c1"></span><span class="kd">static</span> <span class="nf">Result</span> <span class="n">decode</span><span class="p">(</span><span class="n">String</span> <span class="nf">charsetName</span><span class="p">,</span> <span class="kt">byte</span><span class="p">[]</span> <span class="nf">ba</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">off</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">len</span><span class="p">)</span>
        <span class="kd">throws</span> <span class="nf">UnsupportedEncodingException</span> <span class="p">{</span>
    <span class="n">Charset</span> <span class="nf">cs</span> <span class="o">=</span> <span class="n">lookupCharset</span><span class="p">(</span><span class="n">csn</span><span class="p">);</span>        
    <span class="k">if</span> <span class="p">(</span><span class="n">cs</span> <span class="o">==</span> <span class="n">ISO_8859_1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">decodeLatin1</span><span class="p">(</span><span class="n">ba</span><span class="p">,</span> <span class="n">off</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// ...
</span><span class="c1"></span><span class="p">}</span>


<span class="c1">// If a String is constructed from byte[], Arrays.copyOfRange copies the specified range of the specified array into a new array.
</span><span class="c1"></span><span class="kd">private</span> <span class="nf">static</span> <span class="n">Result</span> <span class="nf">decodeLatin1</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="nf">ba</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">off</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">len</span><span class="p">)</span> <span class="p">{</span>
       <span class="n">Result</span> <span class="nf">result</span> <span class="o">=</span> <span class="n">resultCached</span><span class="p">.</span><span class="na">get</span><span class="p">();</span>
       <span class="k">if</span> <span class="p">(</span><span class="n">COMPACT_STRINGS</span><span class="p">)</span> <span class="p">{</span>
           <span class="k">return</span> <span class="n">result</span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">copyOfRange</span><span class="p">(</span><span class="n">ba</span><span class="p">,</span> <span class="n">off</span><span class="p">,</span> <span class="n">off</span> <span class="o">+</span> <span class="n">len</span><span class="p">),</span> <span class="n">LATIN1</span><span class="p">);</span>
       <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
           <span class="k">return</span> <span class="n">result</span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">StringLatin1</span><span class="p">.</span><span class="na">inflate</span><span class="p">(</span><span class="n">ba</span><span class="p">,</span> <span class="n">off</span><span class="p">,</span> <span class="n">len</span><span class="p">),</span> <span class="n">UTF16</span><span class="p">);</span>
       <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>    </code></pre></td></tr></table>
</div>
</div>
<h2 id="length"><code>length()</code></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// String.java
</span><span class="c1"></span><span class="kt">byte</span> <span class="nf">coder</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">COMPACT_STRINGS</span> <span class="o">?</span> <span class="n">coder</span> <span class="o">:</span> <span class="n">UTF16</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// for LATIN1, coder is 0
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">int</span> <span class="n">length</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">value</span><span class="p">.</span><span class="na">length</span> <span class="o">&gt;&gt;</span> <span class="n">coder</span><span class="p">();</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="isempty"><code>isEmpty()</code></h2>

<p><code>isEmpty()</code> checks if <code>length()</code> is 0.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// String.java
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">boolean</span> <span class="n">isEmpty</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">value</span><span class="p">.</span><span class="na">length</span> <span class="o">==</span> <span class="n">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<h2 id="charat-int"><code>charAt(int)</code></h2>

<p><code>charAt(int)</code> returns the char value at the specified index.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// String.java
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">char</span> <span class="n">charAt</span><span class="p">(</span><span class="kt">int</span> <span class="nf">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">isLatin1</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">StringLatin1</span><span class="p">.</span><span class="na">charAt</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">index</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">StringUTF16</span><span class="p">.</span><span class="na">charAt</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">index</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// StringLatin1.java
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">static</span> <span class="kt">char</span> <span class="nf">charAt</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="nf">value</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">index</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">index</span> <span class="o">&lt;</span> <span class="n">0</span> <span class="o">||</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="n">value</span><span class="p">.</span><span class="na">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">StringIndexOutOfBoundsException</span><span class="p">(</span><span class="n">index</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span><span class="kt">char</span><span class="p">)(</span><span class="n">value</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">0xff</span><span class="p">);</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><code>StringLatin1</code> returns the index of <code>value</code>.</p>

<h2 id="equals-object"><code>equals(Object)</code></h2>

<p><code>equals(Object)</code> compares this string to the specified object.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// String.java
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">boolean</span> <span class="n">equals</span><span class="p">(</span><span class="n">Object</span> <span class="nf">anObject</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">anObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">anObject</span> <span class="nf">instanceof</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">String</span> <span class="nf">aString</span> <span class="o">=</span> <span class="p">(</span><span class="n">String</span><span class="p">)</span><span class="n">anObject</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">coder</span><span class="p">()</span> <span class="o">==</span> <span class="n">aString</span><span class="p">.</span><span class="na">coder</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">isLatin1</span><span class="p">()</span> <span class="o">?</span> <span class="n">StringLatin1</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">aString</span><span class="p">.</span><span class="na">value</span><span class="p">)</span>
                              <span class="o">:</span> <span class="n">StringUTF16</span><span class="p">.</span><span class="na">equals</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">aString</span><span class="p">.</span><span class="na">value</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// StringLatin1.java
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">static</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="nf">value</span><span class="p">,</span> <span class="kt">byte</span><span class="p">[]</span> <span class="nf">other</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="na">length</span> <span class="o">==</span> <span class="n">other</span><span class="p">.</span><span class="na">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nf">i</span> <span class="o">=</span> <span class="n">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">value</span><span class="p">.</span><span class="na">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">other</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>String is equal to another <code>Object</code> when,</p>

<ul>
<li>another object is an instance of <code>String</code></li>
<li>and <code>coder</code> is same</li>
<li>and each bytes at same index of this <code>Object</code> is equal to specified <code>String</code></li>
</ul>

<h2 id="startswith-string-int"><code>startsWith(String, int)</code></h2>

<p><code>startsWith(String, int)</code> tests if the substring of this string beginning at the specified index starts with the specified prefix.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// String.java
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">boolean</span> <span class="n">startsWith</span><span class="p">(</span><span class="n">String</span> <span class="nf">prefix</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">toffset</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Note: toffset might be near -1&gt;&gt;&gt;1.
</span><span class="c1"></span>    <span class="k">if</span> <span class="p">(</span><span class="n">toffset</span> <span class="o">&lt;</span> <span class="n">0</span> <span class="o">||</span> <span class="n">toffset</span> <span class="o">&gt;</span> <span class="n">length</span><span class="p">()</span> <span class="o">-</span> <span class="n">prefix</span><span class="p">.</span><span class="na">length</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">byte</span> <span class="nf">ta</span><span class="p">[]</span> <span class="o">=</span> <span class="n">value</span><span class="p">;</span>
    <span class="kt">byte</span> <span class="nf">pa</span><span class="p">[]</span> <span class="o">=</span> <span class="n">prefix</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
    <span class="kt">int</span> <span class="nf">po</span> <span class="o">=</span> <span class="n">0</span><span class="p">;</span>
    <span class="kt">int</span> <span class="nf">pc</span> <span class="o">=</span> <span class="n">pa</span><span class="p">.</span><span class="na">length</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">coder</span><span class="p">()</span> <span class="o">==</span> <span class="n">prefix</span><span class="p">.</span><span class="na">coder</span><span class="p">())</span> <span class="p">{</span>
        <span class="kt">int</span> <span class="nf">to</span> <span class="o">=</span> <span class="n">isLatin1</span><span class="p">()</span> <span class="o">?</span> <span class="n">toffset</span> <span class="o">:</span> <span class="n">toffset</span> <span class="o">&lt;&lt;</span> <span class="n">1</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="n">po</span> <span class="o">&lt;</span> <span class="n">pc</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">ta</span><span class="p">[</span><span class="n">to</span><span class="o">++</span><span class="p">]</span> <span class="o">!=</span> <span class="n">pa</span><span class="p">[</span><span class="n">po</span><span class="o">++</span><span class="p">])</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">isLatin1</span><span class="p">())</span> <span class="p">{</span>  <span class="c1">// &amp;&amp; pcoder == UTF16
</span><span class="c1"></span>            <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// coder == UTF16 &amp;&amp; pcoder == LATIN1)
</span><span class="c1"></span>        <span class="k">while</span> <span class="p">(</span><span class="n">po</span> <span class="o">&lt;</span> <span class="n">pc</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">StringUTF16</span><span class="p">.</span><span class="na">getChar</span><span class="p">(</span><span class="n">ta</span><span class="p">,</span> <span class="n">toffset</span><span class="o">++</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="n">pa</span><span class="p">[</span><span class="n">po</span><span class="o">++</span><span class="p">]</span> <span class="o">&amp;</span> <span class="n">0xff</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
           <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>First, make sure two strings shares same coder. Then compare two <code>byte</code> one by one.</p>

<h2 id="indexof-int-int"><code>indexOf(int, int)</code></h2>

<p><code>indexOf(int, int)</code> returns the index within this string of the first occurrence of the specified character, starting the search at the specified index.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// String.java
</span><span class="c1"></span>
<span class="kd">public</span> <span class="nf">int</span> <span class="n">indexOf</span><span class="p">(</span><span class="kt">int</span> <span class="nf">ch</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">fromIndex</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">isLatin1</span><span class="p">()</span> <span class="o">?</span> <span class="n">StringLatin1</span><span class="p">.</span><span class="na">indexOf</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ch</span><span class="p">,</span> <span class="n">fromIndex</span><span class="p">)</span>
                     <span class="o">:</span> <span class="n">StringUTF16</span><span class="p">.</span><span class="na">indexOf</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">ch</span><span class="p">,</span> <span class="n">fromIndex</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// StringLatin1.java
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">static</span> <span class="kt">int</span> <span class="nf">indexOf</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="nf">value</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">ch</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">fromIndex</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">canEncode</span><span class="p">(</span><span class="n">ch</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="n">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">max</span> <span class="o">=</span> <span class="n">value</span><span class="p">.</span><span class="na">length</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fromIndex</span> <span class="o">&lt;</span> <span class="n">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">fromIndex</span> <span class="o">=</span> <span class="n">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">fromIndex</span> <span class="o">&gt;=</span> <span class="n">max</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Note: fromIndex might be near -1&gt;&gt;&gt;1.
</span><span class="c1"></span>        <span class="k">return</span> <span class="o">-</span><span class="n">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">byte</span> <span class="nf">c</span> <span class="o">=</span> <span class="p">(</span><span class="kt">byte</span><span class="p">)</span><span class="n">ch</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nf">i</span> <span class="o">=</span> <span class="n">fromIndex</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">max</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
           <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="o">-</span><span class="n">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>From start to end, <code>indexOf</code> returns the index if the element at this index is same to int <code>ch</code>.</p>

<h2 id="indexof-string"><code>indexOf(String)</code></h2>

<p><code>indexOf(String)</code> returns the index within this string of the first occurrence of the specified substring.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// String.java
</span><span class="c1"></span>
<span class="kd">public</span> <span class="nf">int</span> <span class="n">indexOf</span><span class="p">(</span><span class="n">String</span> <span class="nf">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">coder</span><span class="p">()</span> <span class="o">==</span> <span class="n">str</span><span class="p">.</span><span class="na">coder</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">isLatin1</span><span class="p">()</span> <span class="o">?</span> <span class="n">StringLatin1</span><span class="p">.</span><span class="na">indexOf</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">str</span><span class="p">.</span><span class="na">value</span><span class="p">)</span>
                          <span class="o">:</span> <span class="n">StringUTF16</span><span class="p">.</span><span class="na">indexOf</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">str</span><span class="p">.</span><span class="na">value</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">coder</span><span class="p">()</span> <span class="o">==</span> <span class="n">LATIN1</span><span class="p">)</span> <span class="p">{</span>  <span class="c1">// str.coder == UTF16
</span><span class="c1"></span>        <span class="k">return</span> <span class="o">-</span><span class="n">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">StringUTF16</span><span class="p">.</span><span class="na">indexOfLatin1</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">str</span><span class="p">.</span><span class="na">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// StringLatin1.java
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">static</span> <span class="kt">int</span> <span class="nf">indexOf</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="nf">value</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">valueCount</span><span class="p">,</span> <span class="kt">byte</span><span class="p">[]</span> <span class="nf">str</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">strCount</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">fromIndex</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">byte</span> <span class="nf">first</span> <span class="o">=</span> <span class="n">str</span><span class="p">[</span><span class="n">0</span><span class="p">];</span>
    <span class="kt">int</span> <span class="nf">max</span> <span class="o">=</span> <span class="p">(</span><span class="n">valueCount</span> <span class="o">-</span> <span class="n">strCount</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nf">i</span> <span class="o">=</span> <span class="n">fromIndex</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">max</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Look for first character.
</span><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">first</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">max</span> <span class="o">&amp;&amp;</span> <span class="n">value</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">!=</span> <span class="n">first</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="c1">// Found first character, now look at the rest of value
</span><span class="c1"></span>        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">max</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="nf">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="p">;</span>
            <span class="kt">int</span> <span class="nf">end</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="n">strCount</span> <span class="o">-</span> <span class="n">1</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="nf">k</span> <span class="o">=</span> <span class="n">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">end</span> <span class="o">&amp;&amp;</span> <span class="n">value</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">==</span> <span class="n">str</span><span class="p">[</span><span class="n">k</span><span class="p">];</span> <span class="n">j</span><span class="o">++</span><span class="p">,</span> <span class="n">k</span><span class="o">++</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">j</span> <span class="o">==</span> <span class="n">end</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// Found whole string.
</span><span class="c1"></span>                <span class="k">return</span> <span class="n">i</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="o">-</span><span class="n">1</span><span class="p">;</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p>It seems <code>indexOf(byte[, int, byte[], int, int)</code> uses brute force, that&rsquo;s interesting.</p>

<h2 id="substring-int-int"><code>substring(int, int)</code></h2>

<p><code>substring(int, int)</code> returns a string that is a substring of this string.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// String.java
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">String</span> <span class="n">substring</span><span class="p">(</span><span class="kt">int</span> <span class="nf">beginIndex</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">endIndex</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="nf">length</span> <span class="o">=</span> <span class="n">length</span><span class="p">();</span>
    <span class="n">checkBoundsBeginEnd</span><span class="p">(</span><span class="n">beginIndex</span><span class="p">,</span> <span class="n">endIndex</span><span class="p">,</span> <span class="n">length</span><span class="p">);</span>
    <span class="kt">int</span> <span class="nf">subLen</span> <span class="o">=</span> <span class="n">endIndex</span> <span class="o">-</span> <span class="n">beginIndex</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">beginIndex</span> <span class="o">==</span> <span class="n">0</span> <span class="o">&amp;&amp;</span> <span class="n">endIndex</span> <span class="o">==</span> <span class="n">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">isLatin1</span><span class="p">()</span> <span class="o">?</span> <span class="n">StringLatin1</span><span class="p">.</span><span class="na">newString</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">beginIndex</span><span class="p">,</span> <span class="n">subLen</span><span class="p">)</span>
                      <span class="o">:</span> <span class="n">StringUTF16</span><span class="p">.</span><span class="na">newString</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">beginIndex</span><span class="p">,</span> <span class="n">subLen</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// StringLatin1.java
</span><span class="c1"></span><span class="kd">public</span> <span class="nf">static</span> <span class="n">String</span> <span class="nf">newString</span><span class="p">(</span><span class="kt">byte</span><span class="p">[]</span> <span class="nf">val</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">index</span><span class="p">,</span> <span class="kt">int</span> <span class="nf">len</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">copyOfRange</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">index</span> <span class="o">+</span> <span class="n">len</span><span class="p">),</span>
                      <span class="n">LATIN1</span><span class="p">);</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><code>Arrays.copyOfRange</code> again, and a new <code>String</code> will be allocated.</p>

<h2 id="concat-string"><code>concat(String)</code></h2>

<p><code>concat(String)</code> concatenates the specified string to the end of this string.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">// String.java
</span><span class="c1"></span>
<span class="kd">public</span> <span class="nf">String</span> <span class="n">concat</span><span class="p">(</span><span class="n">String</span> <span class="nf">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="nf">olen</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="na">length</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">olen</span> <span class="o">==</span> <span class="n">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">coder</span><span class="p">()</span> <span class="o">==</span> <span class="n">str</span><span class="p">.</span><span class="na">coder</span><span class="p">())</span> <span class="p">{</span>
        <span class="kt">byte</span><span class="p">[]</span> <span class="nf">val</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
        <span class="kt">byte</span><span class="p">[]</span> <span class="nf">oval</span> <span class="o">=</span> <span class="n">str</span><span class="p">.</span><span class="na">value</span><span class="p">;</span>
        <span class="kt">int</span> <span class="nf">len</span> <span class="o">=</span> <span class="n">val</span><span class="p">.</span><span class="na">length</span> <span class="o">+</span> <span class="n">oval</span><span class="p">.</span><span class="na">length</span><span class="p">;</span>
        <span class="kt">byte</span><span class="p">[]</span> <span class="nf">buf</span> <span class="o">=</span> <span class="n">Arrays</span><span class="p">.</span><span class="na">copyOf</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">len</span><span class="p">);</span>
        <span class="n">System</span><span class="p">.</span><span class="na">arraycopy</span><span class="p">(</span><span class="n">oval</span><span class="p">,</span> <span class="n">0</span><span class="p">,</span> <span class="n">buf</span><span class="p">,</span> <span class="n">val</span><span class="p">.</span><span class="na">length</span><span class="p">,</span> <span class="n">oval</span><span class="p">.</span><span class="na">length</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">coder</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">int</span> <span class="nf">len</span> <span class="o">=</span> <span class="n">length</span><span class="p">();</span>
    <span class="kt">byte</span><span class="p">[]</span> <span class="nf">buf</span> <span class="o">=</span> <span class="n">StringUTF16</span><span class="p">.</span><span class="na">newBytesFor</span><span class="p">(</span><span class="n">len</span> <span class="o">+</span> <span class="n">olen</span><span class="p">);</span>
    <span class="n">getBytes</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">0</span><span class="p">,</span> <span class="n">UTF16</span><span class="p">);</span>
    <span class="n">str</span><span class="p">.</span><span class="na">getBytes</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">len</span><span class="p">,</span> <span class="n">UTF16</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">UTF16</span><span class="p">);</span>
<span class="p">}</span></code></pre></td></tr></table>
</div>
</div>
<p><code>System.arraycopy</code> copies two <code>byte[]</code> together beneath.</p>
    </div>

    
<footer class="post-footer">
      <div class="post-tags">
          <a href="/en/tags/java.lang/">java.lang</a>
          <a href="/en/tags/data-structure/">Data Structure</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/en/post/java-linkedlist/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Java LinkedList</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
      </nav>
    </footer>
  </article>
        </div>
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'guoqing';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:hellokangning@hotmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://www.linkedin.com/in/guoqing-geng-9032b820/" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://github.com/hellokangning" class="iconfont icon-github" title="github"></a>
      <a href="https://www.douban.com/people/hellokangning/" class="iconfont icon-douban" title="douban"></a>
      <a href="https://www.instagram.com/hellokangning/" class="iconfont icon-instagram" title="instagram"></a>
  <a href="https://hellokangning.github.io/en/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2016 - 
    2019
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Guoqing Geng</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>
<script type="text/javascript" src="/dist/even.26188efa.min.js"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-105833321-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
